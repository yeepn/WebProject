<!-- bootstrap引入 -->
<link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src = "https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js" ></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<!-- 样式添加 -->
<style>
    .welcome .search-box {
        width: 80vw;
        height: 20vh;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
    }

    .box:hover {
        box-shadow: 0 8px 8px rgba(10, 16, 20, .24), 0 0 8px rgba(10, 16, 20, .12);
        text-decoration: none;
        cursor: pointer;
        border: 0;
        transform: translateY(-5px);
    }

    .text_hidden {
        height: 3.8rem;
        overflow: hidden;
        display: -webkit-box;
        text-overflow: ellipsis;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        text-align: center;
    }

    .photo_hight {
        position: relative;
        height: 25rem;
    }

    .photo_hight a {
        color: #000;
    }

    .recommend {
        color: red;
        position: absolute;
        background-color: #fff;
        top: 0rem;
        right: 0rem;
    }

    .photo_hidden {
        width: 100%;
        height: 15.5rem;
    }

    .photo_hidden img {
        height: 15.5rem;
    }

    .under {
        width: 100%;
        margin-top: 2rem;
        height: 30rem;
        background: url(images/under.png);
        background-size: 100%;
        background-repeat: no-repeat;
        background-position: 40% 45%;
    }

    .under_main {
        display: flex;
        height: 30rem;
        margin: 0 auto;
        overflow: hidden;
        justify-content: space-between;
    }

    .under_main ul {
        display: flex;
        justify-content: space-between;
        overflow: hidden;
        height: 6rem;
        margin-top: 6rem;
        padding: 0px;
    }

    .under_main ul li {
        height: 1.6rem;
        line-height: 1.6rem;
        padding: 1.6rem 0px;
        font-weight: bold;
        font-size: 1.6rem;
        overflow: hidden;
    }

    .under_logo {
        height: 18rem;
        margin-top: 6rem;
    }

    .under_main ul li a {
        text-decoration: none;
        color: white;
    }

    .under_logo img {
        padding-bottom: 1rem;
        border-bottom: solid 1px white;
    }

    .under_logo p {
        margin: 0px;
        height: 4rem;
        padding: 1rem 0px;
        color: white;
        line-height: 2rem;
        font-size: 1.38rem;
    }
</style>
<div class="welcome">
    <!--    搜索框-->
    <!--    <form class="layui-form search-box" action="">-->
    <!--        <select name="search">-->
    <!--            <option value="0" selected="">全站</option>-->
    <!--            <option value="1">时间</option>-->
    <!--            <option value="2">主题</option>-->
    <!--        </select>-->
    <!--        <input type="text" placeholder="请填写搜索关键字" class="layui-input" />-->
    <!--        <button type="button" class="layui-btn layui-btn-primary">搜索</button>-->
    <!--    </form>-->
    <!--    轮播图start-->
    <div id="myCarousel" class="carousel slide">
        <!-- 轮播（Carousel）指标 -->
        <ol class="carousel-indicators" id="carousel-indicator">

        </ol>
        <!-- 轮播（Carousel）项目 -->
        <div class="carousel-inner" id="carousel-img">

        </div>
        <!-- 轮播（Carousel）导航 -->
        <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <!--    轮播图end-->
    <!-- 相册推荐 start-->
    <!-- 相册第一排 -->
    <div class="container " style="margin-top: 2rem; background-color: #fff; ">
        <div class="row " id="album-row-1">
        </div>
    </div>
    <!-- 相册第二排 -->
    <div class="container " style="margin-top: 2rem; background-color: #fff; ">
        <div class="row " id="album-row-2">
        </div>
    </div>
    <!-- 相册推荐end -->
    <!-- 全体相册预览 start-->
    <div class="container" style="margin-top: 2rem; text-align: center;">
        <a href="#">
            <h4>查看更多</h4>
        </a>
    </div>

    <!-- 全体相册预览end -->
    <!-- 友情链接 start-->
    <div class="under">
        <div class="container">
            <div class="under_main row">
                <div class="col-md-4 col-xs-8">
                    <ul>
                        <li>
                            <a href="http://news.henu.edu.cn/" target="_blank">新闻资讯</a>
                        </li>
                        <li>
                            <a href="http://iao.henu.edu.cn/" target="_blank">国际交流</a>
                        </li>
                    </ul>
                    <ul>
                        <li>
                            <a href="http://www.henu.edu.cn/xxgk.htm" target="_blank">河大概况</a>
                        </li>
                        <li>
                            <a href="http://rsc.henu.edu.cn/" target="_blank">师资队伍</a>
                        </li>
                    </ul>
                </div>
                <div class="under_logo col-md-4 col-xs-4">
                    <a href="http://www.henu.edu.cn/">
                        <img class="img-responsive" src="images/henu.png" alt="">
                    </a>
                    <p>
                        地址：中国 河南 开封.明伦街/金明大道<br> 邮编：475001/475004
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- 友情链接 end-->
    <!-- 版权声明 start-->
    <div class=" panel-default " style="height: 3rem;; background-color: #2d8cf0; ">
        <h4 style="text-align: center ;line-height: 3rem; ">Copyright © 2021河南大学 版权所有</h4>
    </div>
    <!-- 版权声明 end -->
</div>
<script>
    function qq (message) {
        console.log(message);
        carouselData = message.data;
        var i = 0;
        for (i = 0; i < carouselData.length; i++) {
            if (i === 0) {
                jq1111('#carousel-indicator').append('<li data-target="#myCarousel" data-slide-to="0" class="active"></li>');
                console.log(carouselData[0].fileName)
                jq1111('#carousel-img').append('<div class="item  active"><img src="'+'http://localhost:5000/CarouselImages/' + carouselData[0].fileName + '"</div>');
            } else {
                jq1111('#carousel-indicator').append(
                    '<li data-target="#myCarousel" data-slide-to="' +
                    i +
                    '"></li>');
                jq1111('#carousel-img').append('\<div class=\"item\"\>' +
                    '\<img src=\"' +
                    'http://localhost:5000/CarouselImages/' + carouselData[i].fileName +
                    '\"</div>');
            }
        }
    }
    //轮播图获取
    var carouselData;
    jq1111.ajax({
        type: "GET",
        crossDomain: true,
        url: "http://localhost:5000/api/Carousel",
        contentType: "application/json",
        dataType: "json",
        async: false,
        xhrFields: {
            withCredentials: true
        },
        error: function (message) {
            console.log(message.responseJSON);
            // layer.msg('失败:'+message.responseJSON.msg);
        },
        success: qq,
    });

    //推荐相册获取
    var HRData;
    jq1111.ajax({
        type: "GET",
        crossDomain: true,
        url: "http://localhost:5000/api/HotRecommend/Get",
        contentType: "application/json",
        dataType: "json",
        async: false,
        xhrFields: {
            withCredentials: true
        },
        success: function (message) {
            console.log(message);
            HRData=message.data;
            var selecter;
            for (i=0;i<8;i++){
                if(i<4){
                    selecter=jq1111('#album-row-1')
                }
                else {
                    selecter=jq1111('#album-row-2')
                }
                //获取相册信息
                var albumData;
                jq1111.ajax({
                    type: "GET",
                    crossDomain: true,
                    url: "http://localhost:5000/api/PersonalAlbum/"+HRData[i].albumId,
                    contentType: "application/json",
                    dataType: "json",
                    async: false,
                    xhrFields: {
                        withCredentials: true
                    },
                    error: function (message) {
                        console.log(message.responseJSON);
                        // layer.msg('失败:'+message.responseJSON.msg);
                    },
                    success: function (message) {
                        albumData=message.data;
                    },
                });

                //获取相册资源信息
                var albumResData;
                jq1111.ajax({
                    type: "GET",
                    crossDomain: true,
                    url: "http://localhost:5000/api/Album/"+HRData[i].albumId+"/resources",
                    contentType: "application/json",
                    dataType: "json",
                    async: false,
                    xhrFields: {
                        withCredentials: true
                    },
                    error: function (message) {
                        console.log(message.responseJSON);
                        // layer.msg('失败:'+message.responseJSON.msg);
                    },
                    success: function (message) {
                        albumResData=message.data;
                    },
                });


                selecter.append('<div class=" col-md-3 box col-xs-6 photo_hight">\n' +
                    '                <a href="page/new-show.html?albumId='+HRData[i].albumId+'">\n' +
                    '                    <div class="photo_hidden"><img\n' +
                    '                            src="http://localhost:5000/api/resource/'+albumResData[0].resourceId+'"\n' +
                    '                            alt=" " class="img-responsive center-block"></div>\n' +
                    '                    <h4 style="text-align: center;"><strong>'+albumData.title+'</strong></h4>\n' +
                    '                    <p class="text_hidden">'+albumData.description+'</p>\n' +
                    '                    <span class="layui-badge-rim recommend layui-bg-blue">Hot</span>\n' +
                    '                </a>\n' +
                    '            </div>')
            }
        },
        error: function (message) {
            console.log(message.responseJSON);
            // layer.msg('失败:'+message.responseJSON.msg);
        },
    });



    </script>
